@startuml
'https://raphael-leger.medium.com/automatically-generating-up-to-date-database-diagrams-with-typeorm-d1279a20545e

!define primary_key(x) <b><color:#b8861b><&key></color> x</b>
!define foreign_key(x) <color:#aaaaaa><&key></color> x
!define column(x) <color:#efefef><&media-record></color> x
!define table(name, desc) class name as "desc" << (T,#FFAAAA) >>
!define comment(x) <color:green>x</color>
!define type(x) <color:blue>x</color>

hide methods
hide stereotypes

{{ range . -}}
table( {{ .Name }}, {{ .Name }}{{ if .Comment }}\n({{ .Comment }}) {{- end }} ) {
    {{- range .Columns }}
    {{- if .IsPrimaryKey }}
    primary_key( {{ .Name }} ): type( {{ .Type }} ) {{ if .Comment }} comment( {{ .Comment }} ) {{ end }}
    {{- else }}
    column( {{ .Name }} ): type( {{ .Type }} ) {{ if .Comment }} comment( {{ .Comment }} ) {{ end }}
    {{- end }}
    {{- end }}
}
{{- end }}

@enduml